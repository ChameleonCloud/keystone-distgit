From 53260428c1b1de6d349f094f6fde7352e03b8944 Mon Sep 17 00:00:00 2001
From: Alan Pevec <apevec@redhat.com>
Date: Mon, 9 Sep 2013 00:38:42 +0200
Subject: [PATCH] remove runtime dep on python-pbr

---
 bin/keystone-all |  3 +--
 keystone/cli.py  |  3 +--
 requirements.txt | 27 +--------------------------
 3 files changed, 3 insertions(+), 30 deletions(-)

diff --git a/bin/keystone-all b/bin/keystone-all
index 66d1ccc..c1cef5c 100755
--- a/bin/keystone-all
+++ b/bin/keystone-all
@@ -33,7 +33,6 @@ if os.path.exists(os.path.join(possible_topdir,
 
 
 from paste import deploy
-import pbr.version
 
 from keystone.openstack.common import gettextutils
 
@@ -106,7 +105,7 @@ if __name__ == '__main__':
     sql.initialize()
 
     CONF(project='keystone',
-         version=pbr.version.VersionInfo('keystone').version_string(),
+         version='REDHATKEYSTONEVERSION',
          default_config_files=config_files)
 
     config.setup_logging()
diff --git a/keystone/cli.py b/keystone/cli.py
index 514e0d7..290ca0a 100644
--- a/keystone/cli.py
+++ b/keystone/cli.py
@@ -21,7 +21,6 @@ import os
 from migrate import exceptions
 
 from oslo.config import cfg
-import pbr.version
 
 from keystone.common import openssl
 from keystone.common import sql
@@ -216,7 +215,7 @@ def main(argv=None, config_files=None):
 
     CONF(args=argv[1:],
          project='keystone',
-         version=pbr.version.VersionInfo('keystone').version_string(),
+         version='REDHATKEYSTONEVERSION',
          usage='%(prog)s [' + '|'.join([cmd.name for cmd in CMDS]) + ']',
          default_config_files=config_files)
     config.setup_logging()
diff --git a/requirements.txt b/requirements.txt
index 472a949..e975d85 100644
--- a/requirements.txt
+++ b/requirements.txt
@@ -1,27 +1,2 @@
 # keystone dependencies
-pbr>=0.5.21,<1.0
-pam>=0.1.4
-WebOb>=1.2.3,<1.3
-eventlet>=0.13.0
-greenlet>=0.3.2
-netaddr>=0.7.6
-PasteDeploy>=1.5.0
-Paste
-Routes>=1.12.3
-six>=1.4.1
-SQLAlchemy>=0.7.8,<=0.7.99
-sqlalchemy-migrate>=0.8.2
-passlib
-lxml>=2.3
-iso8601>=0.1.8
-python-keystoneclient>=0.4.1
-oslo.config>=1.2.0
-Babel>=1.3
-oauthlib
-dogpile.cache>=0.5.0
-
-# KDS exclusive dependencies
-
-pecan>=0.2.0
-pycrypto>=2.6
-WSME>=0.5b6
+# let RPM handle deps
