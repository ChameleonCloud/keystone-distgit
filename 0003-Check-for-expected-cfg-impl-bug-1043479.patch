From 3838135db90325b00fd9c998b31abe4781a35e7c Mon Sep 17 00:00:00 2001
From: Dolph Mathews <dolph.mathews@gmail.com>
Date: Wed, 29 Aug 2012 13:55:40 -0500
Subject: [PATCH] Check for expected cfg impl (bug 1043479)

Change-Id: Id2ac85d4ac61713c0ca8e2c10e68cbdeeadff4cb
---
 keystone/middleware/auth_token.py |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/keystone/middleware/auth_token.py b/keystone/middleware/auth_token.py
index f53ace4..d12c74f 100644
--- a/keystone/middleware/auth_token.py
+++ b/keystone/middleware/auth_token.py
@@ -117,7 +117,7 @@ except ImportError:
             cfg = __import__('%s.openstack.common.cfg' % app,
                              fromlist=['%s.openstack.common' % app])
             # test which application middleware is running in
-            if 'config_file' in cfg.CONF:
+            if hasattr(cfg, 'CONF') and 'config_file' in cfg.CONF:
                 CONF = cfg.CONF
                 break
         except ImportError:
